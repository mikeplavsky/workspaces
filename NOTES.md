## Some ideas worth sharing and for us to remember

0. **TAG TAG TAG** everything you can!
1. **OPINIONATED** always design cleanup pipeline along with a provisioning one. This will save you a lot of time when time come to remove all that mess.<br/>:eyes:Check CloudFormation **Delete** resource at [pipeline.yaml](pipeline.yaml)<br/>**IMPORTANT** This pipeline should have disable transition after **Source** stage.
2. **MULTIPLE SOURCES** for **AWS CodePipeline**. A simple example of how to replace git submodules ([which are not supported by AWS CodePipleine](https://docs.aws.amazon.com/codepipeline/latest/userguide/troubleshooting.html#troubleshooting-gs1)) with  multiple input sources for your AWS CodePipeline. Obviously might not work for all of your scenarios. But it works here :+1:<br/>:eyes:Examine CloudFormation **Create** resource at [pipeline.yaml](pipeline.yaml). Pay attention to **Source** stage.
3. **BEST PRACTICE** Don't abuse [CloudFormation Intrinsic Function ImportValue](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-importvalue.html). Use it only when absolutely nessesary (example might be when you created CloudFormation Stacks during different deployment cycles). Use approach below whever it is possible.
4. **HOW TO** Pass CloudFormation output from one stack to another [Using Parameter Override Functions with CodePipeline](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/continuous-delivery-codepipeline-parameter-override-functions.html).<br/>:eyes:You can find real example by examing CloudFormation **Create** resource at [pipeline.yaml](pipeline.yaml)
5. **HOW TO** Use [CloudFormation Condition Function IF](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-conditions.html#intrinsic-function-reference-conditions-if) and [CloudFormation Pseudo parameter NoValue](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/pseudo-parameter-reference.html#cfn-pseudo-param-novalue) to **CONDITIONALLY CREATE AWS CodePipeline STAGE**.<br/>:eyes:Check CloudFormation **Create** and **Delete** resources at [pipeline.yaml](pipeline.yaml)
6. **HOW TO** You can apply the same approach from above to conditionally attach [AWS IAM Policies](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html) to your [AWS IAM Roles](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html).<br/>:eyes:Check CloudFormation **CodePipelineRole** resource at [pipeline.yaml](pipeline.yaml)
7. **BEST PRACTICE** Document usage of AWS IAM Policies. So you know what to remove later in case of you stack changed (new CloudFormation template added and/or more importantely deleted).<br/>:eyes:Check CloudFormation **CodePipelineRole** resource at [pipeline.yaml](pipeline.yaml)
8. **TRADE-OFF** Don't live you users behind in case you can't (or don't want) to automate. Give the a hint at least.<br/>:eyes:Check description for CloudFormation parameter **BundledId** at [pipeline.yaml](pipeline.yaml).<br/>In fact this can be automated by using [Custom CloudFormation Resource](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources.html). Just not worthwhile in this particular case. Hence it is a **TRADE-OFF**.<br/>:e-mail:Let us know if you badly need to automate this.
